<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7. 硬件基础 &mdash; 简明 Linux 系统指导 1.0.0 文档</title>
    
    <link rel="stylesheet" href="static/nature_overwrite.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="static/translations.js"></script>
    <link rel="top" title="简明 Linux 系统指导 1.0.0 文档" href="index.html" />
    <link rel="next" title="8. 软件基础" href="软件基础.html" />
    <link rel="prev" title="6. 日常使用与管理" href="日常使用与管理.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="软件基础.html" title="8. 软件基础"
             accesskey="N">下一页</a></li>
        <li class="right" >
          <a href="日常使用与管理.html" title="6. 日常使用与管理"
             accesskey="P">上一页</a> |</li>
        <li><a href="index.html">简明 Linux 系统指导 1.0.0 文档</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="id1">
<h1>7. 硬件基础<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<p>从这一章开始，我们将深入Linux系统的内部一探究竟了。在此之前，我们需要补充一些必要的知识细节。</p>
<p>操作系统必须与基本硬件系统密切协作。它需要那些仅仅能够由硬件提供的服务。为了全面理解Linux操作系统，你必须要懂得一些有关硬件的知识。本章将对硬件：现代PC做一个简要的介绍。</p>
<p>下图是一块典型的PC主板</p>
<img alt="images/PC主板.jpg" src="images/PC主板.jpg" />
<div class="section" id="cpu">
<h2>7.1. CPU<a class="headerlink" href="#cpu" title="永久链接至标题">¶</a></h2>
<p>CPU，或者微处理器，是计算机系统的核心。微处理器进行计算或者逻辑操作并且管理来自主存的指令并执行它。</p>
<p>在计算机的早期时代，微处理器的功能部件使用的是分立元件（外型很大）。这就是中央处理单元这一名词的由来。现代微处理器将部件结合到小型硅片上的集成电路中。在本书中CPU和微处理器及处理器有相同的意义。微处理器的操作对象是二进制数据；数据由0和1组成。1和0对应着电子开关的开路与断路状态。正如十进制的42表示有4个10和一个2一样，一个二进制数是一系列表示2的次幂的二进制数字组成。二进制0001对应十进制的1，二进制的0010对应十进制的2，二进制的0011表示3，而0100对应4。十进制42的二进制表示为101010。但是在计算机程序中，人们常用十进制来表示数而不是直接使用二进制。在需要使用二进制数时，人们往往使用16进制数。如十进制数只能从0到9一样，16进制数可以从 0疏导15，其中10到15分别用字母A、B、C、D、E及F来表示。这样16进制的2A的十进制表示为42-2*16+10=42。在C程序语言中，16进制数的前缀为&#8221;0x&#8221;；16进制的2A写成0x2A。微处理器可以执行如加、乘和除以及象&#8221;X是否比Y大&#8221;这种逻辑运算。</p>
<p>处理器的执行由外部时钟来监控。这个时钟称为系统时钟，它每隔相同的时间间隔就向CPU发送一个脉冲。在每个时钟脉冲上，处理器都会做一些工作。比如，处理器每个时钟脉冲上执行一条指令。处理器的速度一般以系统时钟的速率来描叙。一个100MHz的处理器每秒将接收100,000,000个时钟滴答。但是用CPU的时钟频率来描叙CPU的工作能力是不正确的，因为它们执行的指令不相同。 然而，快速的时钟可以在某种程度上代表高性能的CPU。</p>
<p>处理器执行的指令是非常简单的；例如&#8221;将内存X处的内容读入寄存器Y&#8221;。寄存器是微处理器的内部存储部件，用来存储数据并对数据执行某些指令。有些指令有可能使处理器停止当前的工作而跳转到内存中另外一条指令执行。现代微处理器的紧凑设计使得它有可能每秒执行上百万甚至亿条指令。 指令执行前必须从内存中取出来。指令自身要使用的数据也必须从内存中取出来并放置在适当的地方。微处理器中寄存器的大小、数量以及类型都取决于微处理器的类型。Intel 80486处理器和Alpha AXP 有迥然不同的寄存器，最明显的区别在于Intel寄存器为32位而AlphaAXP为64位。一般来说，任何处理器都有许多通用寄存器和少量专用寄存器。</p>
<p>许多微处理器有以下几种特定的寄存器：</p>
<dl class="docutils">
<dt>程序计数器(PC)</dt>
<dd>此寄存器包含下条指令执行的地址。每当取回一条指令时，PC的内容将自动增加。</dd>
<dt>堆栈指针(SP)</dt>
<dd>微处理器经常需要访问存储临时数据的外部RAM。堆栈是一种便捷的存放临时数据的方法，处理器提供了特殊指令来将数值压入堆栈然后将其从堆栈中弹出。 堆栈以后进先出(LIFO)的方式工作。换句话说，如果你压入两个值X和Y，然后执行弹栈操作，你将取到Y的值。有些处理器的堆栈从内存顶部向下增长而有些相反。但有的处理器同时支持这两种方式，如ARM。</dd>
<dt>处理机状态字(PS)</dt>
<dd>指令的执行将得到执行结果；比如&#8221;寄存器X中的内容要大于寄存器Y中的内容？&#8221;将得到正确或错误作为结果。PS寄存器包含着这些信息及有关处理器当前状态的其他信息。例如大多数处理器至少有两种执行方式，核心（或管态）与用户方式。PS寄存器包含表示当前执行方式的信息。</dd>
</dl>
</div>
<div class="section" id="id2">
<h2>7.2. 内存<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>所有计算机系统都有一个由不同速度与大小的存储器组成的层次结构。最快的的存储器是高速缓存，它被用来暂存主存中的内容。这种存储器速度非常快但非常昂贵，大多数处理器都有少量的片上高速缓存或者将其放在主板上。有些处理器的高速缓存既包含数据也包含指令，但有些将其分成两部分。 Alpha AXP处理器有两个内部高速缓存，一个用来缓存数据（D-Cache）而另一个用来缓存指令（I- Cache）。而外部高速缓存（B-Cache）将两者混合。这样，相对外部高速缓存存储器，主存的速度非常慢。</p>
<p>高速缓存与主存中的内容必须保持一致。换句话说，对应于地址空间的同一个位置，如果该位置的数据被缓存入高速缓存，则其内容必须和主存中的一致。保证高速缓存一致性的工作由硬件和操作系统共同分担。 这就是在系统中硬件和软件必须紧密协作的原因。</p>
</div>
<div class="section" id="id3">
<h2>7.3. 总线<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<p>主板上分立的部件通过称为总线的线路连接在一起。系统总线的功能在逻辑上被划分为三部分：地址总线、数据总线和控制总线。</p>
<p>地址总线为数据传输指明内存位置（地址）。数据总线包含传输的数据。数据总线是双向的；它允许数据读入CPU也支持从CPU读出来。控制总线则包含几条表示路由分时和系统的控制信号。当然还有其他一些总线存在，例如ISA和PCI总线是将外设连接到系统的常用方式。</p>
</div>
<div class="section" id="id4">
<h2>7.4. 控制器与外设<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<p>外设是一些物理设备，比如说显卡或者磁盘，它们受控于位于主板或者主板上插槽中的控制芯片。</p>
<p>IDE磁盘被IDE控制器芯片控制，而SCSI磁盘由SCSI磁盘控制器芯片控制。这些控制器通过各种总线连接到CPU上或相互间互连。目前制造的大多数系统使用PCI和ISA总线来连接主要系统部件。</p>
<p>控制器是一些类似CPU的处理器，它们可以看做CPU的智能帮手。CPU则是系统的总控。虽然所有这些控制器互不相同，但是它们的寄存器的功能类似。运行在CPU上的软件必须能读出或者写入这些控制寄存器。其中有一个寄存器可能包含指示错误的状态码。另一个则用于控制目的，用来改变控制器的运行模式。在总线上的每个控制器可以被CPU所单独寻址，这是软件设备驱动程序能写入寄存器并能控制这些控制器的原因。</p>
</div>
<div class="section" id="id5">
<h2>7.5. 地址空间<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h2>
<p>系统总线将CPU与主存连接在一起，并和连接CPU与系统硬件外设的总线隔离开。</p>
<p>一般来说，硬件外设存在的主存空间叫I/O空间。I/O空间还可以进一步细分，但这里我们不再深究。CPU既可以访问系统内存空间又可以访问I/O空间内存，而控制器自身只能在CPU协助下间接的访问系统内存。从设备的角度来看，比如说软盘控制器，它只能看到在ISA总线上的控制寄存器而不是系统内存。</p>
<p>典型的CPU使用不同指令来访问内存与I/O空间。例如，可能有一条指令&#8221;将I/O地址0x3F0的内容读入到寄存器X&#8221;。这正是CPU控制系统硬件设备的方式：通过读写I/O地址空间上的外设寄存器。在I/O空间中通用外设(IDE控制器、串行口、软盘控制器等等)上的寄存器经过多年的PC体系结构发展基本保持不变。有时控制器需要直接从系统主存中读写大量数据。例如当用户将数据写入硬盘时。在这种情况下，直接内存访问(DMA)控制器将用来允许硬件外设直接访问系统主存，不过这将处于CPU的严格监控下。</p>
</div>
<div class="section" id="id6">
<h2>7.6. 时钟<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h2>
<p>所有的操作系统都必须准确的得到当前时间，所以现代PC包含一个特殊的外设称为实时时钟(RTC)。它提供了 两种服务：可靠的日期和时间以及精确的时间间隔。RTC有其自身的电池这样即使PC掉电时它照样可以工作，这就是PC总是&#8221;知道&#8221;正确时间和日期的原因。而时间间隔定时器使得操作系统能进行准确的调度工作。</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">內容目录</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="初识 Linux.html">1. 初识 Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="文件与目录.html">2. 文件与目录</a></li>
<li class="toctree-l1"><a class="reference internal" href="用户与用户组.html">3. 用户与用户组</a></li>
<li class="toctree-l1"><a class="reference internal" href="操作系统与应用程序.html">4. 操作系统与应用程序</a></li>
<li class="toctree-l1"><a class="reference internal" href="shell 与 shell 脚本.html">5. shell 与 shell 脚本</a></li>
<li class="toctree-l1"><a class="reference internal" href="日常使用与管理.html">6. 日常使用与管理</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">7. 硬件基础</a></li>
<li class="toctree-l1"><a class="reference internal" href="软件基础.html">8. 软件基础</a></li>
<li class="toctree-l1"><a class="reference internal" href="内存管理.html">9. 内存管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="附录-Linux远程登录.html">10. 附录-Linux远程登录</a></li>
</ul>

  <h4>上一个主题</h4>
  <p class="topless"><a href="日常使用与管理.html"
                        title="上一章">6. 日常使用与管理</a></p>
  <h4>下一个主题</h4>
  <p class="topless"><a href="软件基础.html"
                        title="下一章">8. 软件基础</a></p>
  <h3>本页</h3>
  <ul class="this-page-menu">
    <li><a href="sources/硬件基础.txt"
           rel="nofollow">显示源代码</a></li>
  </ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="软件基础.html" title="8. 软件基础"
             >下一页</a></li>
        <li class="right" >
          <a href="日常使用与管理.html" title="6. 日常使用与管理"
             >上一页</a> |</li>
        <li><a href="index.html">简明 Linux 系统指导 1.0.0 文档</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; 版权所有 2014, 自由文档，由openRPi收集整理编辑.
      由 <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2 创建。
    </div>
  </body>
</html>